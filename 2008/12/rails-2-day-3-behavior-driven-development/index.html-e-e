<!DOCTYPE html>
<html class="no-js" lang="en-US">
	<head>
				<link rel="profile" href="http://gmpg.org/xfn/11" />
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
		<title>rails 2 day 3: behavior-driven development &laquo; the evolving ultrasaurus</title>
		
				<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="the evolving ultrasaurus &raquo; Feed" href="https://www.ultrasaurus.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="the evolving ultrasaurus &raquo; Comments Feed" href="https://www.ultrasaurus.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="the evolving ultrasaurus &raquo; rails 2 day 3: behavior-driven development Comments Feed" href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.ultrasaurus.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.1"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='mailchimpSF_main_css-css'  href='https://www.ultrasaurus.com/?mcsf_action=main_css&#038;ver=5.7.1' type='text/css' media='all' />
<!--[if IE]>
<link rel='stylesheet' id='mailchimpSF_ie_css-css'  href='https://www.ultrasaurus.com/wp-content/plugins/mailchimp/css/ie.css?ver=5.7.1' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='wp-block-library-css'  href='https://www.ultrasaurus.com/wp-includes/css/dist/block-library/style.min.css?ver=5.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='tw-bootstrap-css'  href='https://www.ultrasaurus.com/wp-content/themes/the-bootstrap/css/bootstrap.min.css?ver=2.0.3' type='text/css' media='all' />
<link rel='stylesheet' id='the-bootstrap-css'  href='https://www.ultrasaurus.com/wp-content/themes/the-bootstrap/style.min.css?ver=2.0.1' type='text/css' media='all' />
<style id='the-bootstrap-inline-css' type='text/css'>
body > .container{margin-top:68px;}@media(min-width: 980px){body > .container{margin-top:58px;}}
</style>
<script type='text/javascript' src='https://www.ultrasaurus.com/wp-includes/js/jquery/jquery.min.js?ver=3.5.1' id='jquery-core-js'></script>
<script type='text/javascript' src='https://www.ultrasaurus.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
<script type='text/javascript' src='https://www.ultrasaurus.com/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.5.4' id='ga-external-tracking-js'></script>
<link rel="https://api.w.org/" href="https://www.ultrasaurus.com/wp-json/" /><link rel="alternate" type="application/json" href="https://www.ultrasaurus.com/wp-json/wp/v2/posts/599" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.ultrasaurus.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.ultrasaurus.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.7.1" />
<link rel="canonical" href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/" />
<link rel='shortlink' href='https://www.ultrasaurus.com/?p=599' />
<link rel="alternate" type="application/json+oembed" href="https://www.ultrasaurus.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.ultrasaurus.com%2F2008%2F12%2Frails-2-day-3-behavior-driven-development%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://www.ultrasaurus.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.ultrasaurus.com%2F2008%2F12%2Frails-2-day-3-behavior-driven-development%2F&#038;format=xml" />
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>	<style type="text/css">
				#branding hgroup {
			position: absolute !important;
			clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
			clip: rect(1px, 1px, 1px, 1px);
		}
			</style>
		<!--[if lt IE 9]>
		<script src="https://www.ultrasaurus.com/wp-content/themes/the-bootstrap/js/html5shiv.min.js" type="text/javascript"></script>
		<script src="https://www.ultrasaurus.com/wp-content/themes/the-bootstrap/js/respond.min.js" type="text/javascript"></script>
	<![endif]-->
	<!-- Google Analytics Tracking by Google Analyticator 6.5.4: http://www.videousermanuals.com/google-analyticator/ -->
<script type="text/javascript">
    var analyticsFileTypes = [''];
    var analyticsSnippet = 'enabled';
    var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
  
	_gaq.push(['_setAccount', 'UA-4313619-1']);
    _gaq.push(['_addDevId', 'i9k95']); // Google Analyticator App ID with Google
    _gaq.push(['_gat._anonymizeIp']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
		<style type="text/css" id="wp-custom-css">
			code {
	color: #70a
}

p {
	color: #333
}

blockquote p {
	font-size: 14px;
	font-weight: normal;
	padding-top: 6px;
	padding-bottom: 6px;
	padding-left: 10px;
	padding-right: 60px;
	line-height: 1.2;
}		</style>
			</head>
	
	<body class="post-template-default single single-post postid-599 single-format-standard content-sidebar">
		<div class="container">
			<div id="page" class="hfeed row">
								<header id="branding" role="banner" class="span12">
										<hgroup>
						<h1 id="site-title">
							<a href="https://www.ultrasaurus.com/" title="the evolving ultrasaurus" rel="home">
								<span>the evolving ultrasaurus</span>
							</a>
						</h1>
						<h2 id="site-description">Sarah Allen&#039;s reflections on internet software and other topics</h2>
					</hgroup>
					
					
					<nav id="access" role="navigation">
						<h3 class="assistive-text">Main menu</h3>
						<div class="skip-link"><a class="assistive-text" href="#content" title="Skip to primary content">Skip to primary content</a></div>
						<div class="skip-link"><a class="assistive-text" href="#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
												<div class="navbar navbar-fixed-top navbar-inverse">
							<div class="navbar-inner">
								<div class="container">
									<!-- .btn-navbar is used as the toggle for collapsed navbar content -->
									<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
										<span class="icon-bar"></span>
										<span class="icon-bar"></span>
										<span class="icon-bar"></span>
									</a>
																		<span class="brand">the evolving ultrasaurus</span>
																		<div class="nav-collapse">
										<div class="menu-primary-container"><ul id="menu-primary" class="nav"><li id="menu-item-4272" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4272"><a href="https://www.ultrasaurus.com/about/">About</a></li>
<li id="menu-item-6605" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6605"><a href="https://www.ultrasaurus.com/speaking/">Speaking</a></li>
<li id="menu-item-6366" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6366"><a href="https://www.ultrasaurus.com/code/">Code</a></li>
<li id="menu-item-4269" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4269"><a href="https://www.ultrasaurus.com/archives/">Archives</a></li>
<li id="menu-item-4759" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4759"><a href="https://www.ultrasaurus.com/contact/">Contact</a></li>
<li id="menu-item-4697" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4697"><a href="https://www.ultrasaurus.com/ultrasaurus/">What is an ultrasaurus?</a></li>
</ul></div>	<form id="searchform" class="navbar-search pull-right" method="get" action="https://www.ultrasaurus.com/">
						<label for="s" class="assistive-text hidden">Search</label>
						<input type="search" class="search-query" name="s" id="s" placeholder="Search" />
					</form>								    </div>
								</div>
							</div>
						</div>
											</nav><!-- #access -->
									</header><!-- #branding -->
<section id="primary" class="span8">
	
		<div id="content" role="main">
		<article id="post-599" class="post-599 post type-post status-publish format-standard hentry category-code">
		
	<header class="page-header">
		<h1 class="entry-title">rails 2 day 3: behavior-driven development</h1>		<div class="entry-meta"><span class="sep">Posted on </span><a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/" title="12:42 am" rel="bookmark"><time class="entry-date" datetime="2008-12-22T00:42:19-08:00" pubdate>December 22, 2008</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="https://www.ultrasaurus.com/author/sarah/" title="View all posts by sarah" rel="author">sarah</a></span></span>		<span class="sep"> | </span>
		<span class="comments-link">
			<a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comments"><strong>10</strong> Replies</a>		</span>
		</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

	<div class="entry-content clearfix">
		<p>Now that we have learned some basic Ruby syntax and gained some understanding about what the Rails generate scaffold script does, it is high time we started using a more modern approach to coding.  In fact, if you recall at the end of <a href="https://www.ultrasaurus.com/code/2008/12/rails-day2.html">day 2</a>, I realized with horror that we had actually modified code and added features without developing the tests first.  This defied everything I had ever heard about good coding practices from the Ruby crowd and I set off to mend my ways.</p>
<p><a href="http://www.ruby-forum.com/topic/94721#264483">Rick Denatale</a> describes the process of test-driven/behavior-driven development as:</p>
<ol>
<li>Write the test/spec</li>
<li>Ensure that it FAILS</li>
<li>Write the code to make it pass</li>
<li>Goto step 1</li>
</ol>
<p>After <a href="https://www.ultrasaurus.com/sarahblog/archives/000543.html">reading a bit</a> about test- and behavior-driven development, I decided to use a relatively new framework called <a href="http://github.com/aslakhellesoy/cucumber/wikis">cucumber</a> which uses natural language to describe features.</p>
<p>Today we will:</p>
<ol>
<li><a href="#install">Install cucumber</a></li>
<li><a href="#setup">Set up the application</a></li>
<li><a href="#spec">Describe a feature</a></li>
<li><a href="#fail">Execute the feature and Watch it fail</a></li>
<li><a href="#code">Write the code to make it pass</a></li>
<li><a href="#review">Review what we learned</a></li>
</ol>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>h1 {font-size: 150%}<br />
h1,h2 {font-style: bold}<br />
img<br />
{<br />
border:2px solid silver;<br />
margin:0px 0px 15px 20px;<br />
}<br />
blockquote, pre.code {<br />
border: solid 1px #aaa;<br />
padding: 6px;<br />
background-color: #eee;<br />
color: inherit;<br />
overflow:auto;<br />
margin: 10px 0px;<br />
}</p>
<p><a name="install"></p>
<h1>Install Cucumber</h1>
<p></a></p>
<p>Based on these <a href="http://github.com/aslakhellesoy/cucumber/wikis/ruby-on-rails">install instructions</a></p>
<pre class="code">sudo gem install rspec rspec-rails cucumber webrat</pre>
<p><strong>important</strong>: Cucumber 0.1.12 and up depends on Webrat 0.3.2.1 or higher, which as of this writing is not yet officially released to Rubyforge&#8217;s gem repository. In the meanwhile, install Bryan Helkamp&#8217;s snapshot gem:</p>
<pre class="code">
gem sources -a http://gems.github.com
sudo gem install brynary-webrat
</pre>
<p>The plugins&#8217; dependencies must be installed separately:</p>
<pre class="code">
gem install term-ansicolor treetop diff-lcs nokogiri
</pre>
<p>&nbsp;</p>
<p><a name="setup"></p>
<h1>Setup the Application</h1>
<p></a></p>
<p>First we&#8217;ll create the Rails &#8220;to do list&#8221; application:</p>
<pre class="code">
cd $webroot
rails -d mysql todolist
cd todolist
rake db:create:all
rake db:migrate
</pre>
<p>Now we&#8217;ll set up cucumber for the project</p>
<pre class="code">
ruby script/generate cucumber
create  features/step_definitions
create  features/step_definitions/webrat_steps.rb
create  features/support
create  features/support/env.rb
exists  lib/tasks
create  lib/tasks/cucumber.rake
create  script/cucumber
</pre>
<p>Just to make sure that everything is installed correctly:</p>
<pre class="code">rake features</pre>
<p>If that runs without errors you are ready to rock.</p>
<p><p>&nbsp;</a></p>
<p><a name="spec"></p>
<h1>Describe a Feature</h1>
<p></a></p>
<p>In the features directory that was auto-created for us with the cucumber script, we create a .feature file which starts with a description of the feature.  The first section that describes the feature appears to be purely documentation; however the &#8220;scenario&#8221; sections will each become part of the executable feature definition.  For starters we&#8217;ll do something simple.</p>
<p><code><strong>features/tasklist.feature</strong></code></p>
<pre class="code">
Feature: Tasks
In order to keep track of tasks
People should be able to
Create a list of tasks

Scenario: List Tasks
Given that I have created a task "task 1"
When I go to the tasks page
Then I should see "task 1"
</pre>
<p>We know we haven&#8217;t written any executable steps, but we&#8217;ll execute it anyhow:</p>
<p><img src="http://farm4.static.flickr.com/3243/3126961149_b267e27c02_o.png" /></p>
<p>Note that one of the steps is already defined in webrat.  Isn&#8217;t that cool? When we set up cucumber for the project, it automatically includes step_definitions/webrat_steps.rb which defines some common steps.  As you get the hang of this, you reuse certain word patterns which map to specific tests.  But we&#8217;re getting ahead of ourselves.  We need to dive into the creation of &#8220;steps&#8221; which make up our executable spec. Cucumber gives a some handy snippets to get us started (in the output of &#8220;rake features&#8221; above).  We&#8217;ll paste these into a new file that we&#8217;ll create in the &#8220;features/step_definitions&#8221; directory:</p>
<p><code><strong>features/step_definitions/tasklist_steps.rb</strong></code></p>
<pre class="code">
Given /^that I have created a task "(.*)"$/ do |desc|
Task.create!(:description =&gt; desc)
end

When /^I go to the tasks page$/ do
visit "/tasks"
end
</pre>
<p>Note that I touched up the first step to include a regular expression.  This means I could add <code>Given that I have created a task "foo"</code> to another scenario and it would match this step.</p>
<blockquote><p>
<a name="syntax"></p>
<h2>Short aside on task creation syntax</h2>
<p></a></p>
<p>To create the task, I&#8217;m calling my Task model directly (since I&#8217;m new to Rails, I looked up the ActiveRecord::Base syntax in the<a href="http://api.rubyonrails.org/"> Rails Framework API docs</a>).  In my first pass I wrote:</p>
<pre>
task = Task.new(:description =&gt; desc);
task.save
</pre>
<p>However, Aslak Hellesøy <a href="http://www.ruby-forum.com/topic/174015#762400">kindly pointed out</a> that it would fail silently with that syntax, and instead I should call <code>task.save!</code> or the even simpler <code>Task.create!(:description =&gt; desc)</code>.  I had missed create! in the documentation, since it is part of <a href="http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M001902">ActiveRecord::Validations</a>.  The API doc is a little confusing on this point, but looking at the source shows that <a href="http://www.ruby-forum.com/topic/174015#762531">ActiveRecord::Validations is included as a module</a>.  <a href="http://www.ruby-forum.com/topic/174015#762550">Pat Maddox notes</a> that he uses the bang version (.save!) in tests, and the non-bang version (.save) in production code since validation errors aren&#8217;t exceptional.</p>
</blockquote>
<p><a name="step3"></p>
<h2>Back to Step 3</h2>
<p></a></p>
<p>Looking in <code>features/step_definitions/webrat_steps.rb</code>, you can see the definition of our third step:</p>
<pre class="code">
Then /^I should see "(.*)"$/ do |text|
response.body.should =~ /#{text}/m
end
</pre>
<p>Ok, now we have a simple spec.  Is it time to write the code?  No!</p>
<p><a name="fail"></p>
<h1>Execute the Feature and Watch it Fail</h1>
<p></a><br />
<img src="http://farm4.static.flickr.com/3131/3127004017_c31be47724_o.png" /></p>
<p>As expected, we see errors on our first step, since we have not yet written any code for the application.</p>
<p><a name="code"></p>
<h1>Write the code to make it pass</h1>
<p></a></p>
<p>Now, at last it is time to write code</p>
<pre class="code">
$ ./script/generate scaffold Task description:string
$ rake db:migrate
</pre>
<p>Run the spec again..</p>
<p>
<img src="http://farm4.static.flickr.com/3131/3127010689_8d6948843c_o.png" /></p>
<p>It passes, yay!</p>
<p><a name="review"></p>
<h1>What did we learn?</h1>
<p></a></p>
<p>When we first set up our app, to setup cucumber:</p>
<p><pre class="code">
ruby script/generate cucumber
</pre>
<p>To describe our feature, we create two files:</p>
<ul>
<li>features/xxx.feature</li>
<li>features/step_definitions/xxx_steps.rb</li>
</ul>
<p>To run the feature description:</p>
<pre class="code">
rake features
</pre>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="cat-links block">Posted in <a href="https://www.ultrasaurus.com/category/code/" rel="category tag">code</a>.</span>	</footer><!-- .entry-footer -->
	
	</article><!-- #post-599 -->
		<div id="comments">
			<h2 id="comments-title">
				10 thoughts on &ldquo;<span>rails 2 day 3: behavior-driven development</span>&rdquo;			</h2>
		
					
			<ol class="commentlist unstyled">
						
		<li  id="li-comment-339" class="comment even thread-even depth-1">
			<article id="comment-339" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/?s=140&#038;r=g 2x' class='avatar avatar-70 photo avatar-default' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn"><a href='https://www.ultrasaurus.com/sarahblog/archives/000548.html' rel='external nofollow ugc' class='url'>Sarah Allen's Weblog</a></span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-339"><time pubdate datetime="2008-12-27T07:35:37-08:00">December 27, 2008 at 7:35 am</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p><strong>situated learning through open source</strong></p>
<p>I just read Situated Learning: Legitimate Peripheral Participation by Jean Lave and Etienne Wenger, which I put on my wish list since I am a total geek about theories of how people learn, particularly with regard to social learning. It&#8217;s a challenging &#8230;</p>
				</div><!-- .comment-content -->
			</article><!-- #comment-339 .comment -->
			
	</li><!-- #comment-## -->
		
		<li  id="li-comment-340" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="comment-340" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/f8105400af28b283aea7abf477433e7b?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/f8105400af28b283aea7abf477433e7b?s=140&#038;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn"><a href='http://none' rel='external nofollow ugc' class='url'>Joe Darling</a></span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-340"><time pubdate datetime="2009-02-03T11:24:41-08:00">February 3, 2009 at 11:24 am</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p>Great tutorial. I have been really struggling to find this type of step by step guide that is both up to date and covers BDD.  Thanks very much.</p>
<p>Two minor things:  When I did the rake db:migrate only the development database was migrated and the tests are run on production by default.  Once I changed RAILS_ENV and ran the migration again all worked.</p>
<p>Second: I think the webrat dependency problem has been sorted out.  I just used the gem install version and the example worked OK.</p>
				</div><!-- .comment-content -->
			</article><!-- #comment-340 .comment -->
			
	</li><!-- #comment-## -->
		
		<li  id="li-comment-341" class="comment even thread-even depth-1">
			<article id="comment-341" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/7c04ae29516c13ab4c7d1c6e30ba5109?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/7c04ae29516c13ab4c7d1c6e30ba5109?s=140&#038;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn"><a href='http://www.tedroche.com' rel='external nofollow ugc' class='url'>Ted Roche</a></span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-341"><time pubdate datetime="2009-02-06T13:07:46-08:00">February 6, 2009 at 1:07 pm</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p>Great tutorial. However, webrat has gotten ahead of you, I think. With webrat 1.12, it generated a </p>
<p>#When /^I go to (.+)$/ do |page_name|<br />
#  visit path_to(page_name)<br />
#end</p>
<p>which I just commented out to finish the tutorial. Properly, I suspect I should have worked out path_to, but I was focused on making the tutorial work&#8230;</p>
				</div><!-- .comment-content -->
			</article><!-- #comment-341 .comment -->
			
	</li><!-- #comment-## -->
		
		<li  id="li-comment-342" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="comment-342" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/5834f829a9def19620d4014c46642172?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/5834f829a9def19620d4014c46642172?s=140&#038;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn"><a href='http://www.linkedin.com/in/hoornet' rel='external nofollow ugc' class='url'>Hoornet</a></span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-342"><time pubdate datetime="2009-02-22T07:37:04-08:00">February 22, 2009 at 7:37 am</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p>Hello! I have another problem on winXP. After running rake featurer in your &#8220;Describe a Feature&#8221; chapter, this is what I got. It&#8217;s OK, but there are no letters &#8216;a&#8217; !!!!!<br />
Any ideas?</p>
<p>Code begin:</p>
<p>E:SOURCERAILSrails-2-day-3-behavior-driven-developmenttodolist&gt;rake features</p>
<p>(in E:/SOURCE/RAILS/rails-2-day-3-behavior-driven-development/todolist)<br />
´??  # fetures/tsklist.feture<br />
Feture: Tsks<br />
In order to keep trck of tsks<br />
People should be ble to<br />
Crete  list of tsks<br />
  Scenrio: List Tsks                         # fetures/tsklist.feture:7<br />
    Given tht I hve creted  tsk &#8220;tsk 1&#8221;  # fetures/tsklist.feture:8<br />
    When I go to the tsks pge                # fetures/step_definitions/webrt_st<br />
eps.rb:6<br />
    Then I should see &#8220;tsk 1&#8221;                 # fetures/step_definitions/webrt_s<br />
teps.rb:89</p>
<p>1 scenrio<br />
2 steps skipped<br />
1 step pending (1 with no step definition)</p>
<p>You cn use these snippets to implement pending steps which hve no step definitio<br />
n:</p>
<p>Given /^tht I hve creted  tsk &#8220;tsk 1&#8243;$/ do<br />
end</p>
<p>E:SOURCERAILSrails-2-day-3-behavior-driven-developmenttodolist&gt;</p>
				</div><!-- .comment-content -->
			</article><!-- #comment-342 .comment -->
			
	</li><!-- #comment-## -->
		
		<li  id="li-comment-343" class="comment even thread-even depth-1">
			<article id="comment-343" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/dc2ddce5e05bfae340870fed61eca0e9?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/dc2ddce5e05bfae340870fed61eca0e9?s=140&#038;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn">shane smith</span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-343"><time pubdate datetime="2009-02-22T13:57:30-08:00">February 22, 2009 at 1:57 pm</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p>Thank you for this tutorial.<br />
Webrat now has a &#8220;When I go to(.+)$/&#8221; step.<br />
If you put the path webrat should visit in features/support/paths.rb, then webrat should be able to folow the &#8220;When I go to the tasks page&#8221; directive.</p>
				</div><!-- .comment-content -->
			</article><!-- #comment-343 .comment -->
			
	</li><!-- #comment-## -->
		
		<li  id="li-comment-344" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="comment-344" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/bb5a4c698a42762fb91bc1a9cfacbaba?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/bb5a4c698a42762fb91bc1a9cfacbaba?s=140&#038;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn">Matthew Platte</span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-344"><time pubdate datetime="2009-02-22T20:40:49-08:00">February 22, 2009 at 8:40 pm</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p>The missing &#8220;a&#8221; on Windows is a known bug (I&#8217;m too lazy to provide a url).</p>
				</div><!-- .comment-content -->
			</article><!-- #comment-344 .comment -->
			
	</li><!-- #comment-## -->
		
		<li  id="li-comment-345" class="comment even thread-even depth-1">
			<article id="comment-345" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/20ee0d23c969c7740d3c936a4675bb23?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/20ee0d23c969c7740d3c936a4675bb23?s=140&#038;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn"><a href='https://www.ultrasaurus.com' rel='external nofollow ugc' class='url'>Sarah</a></span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-345"><time pubdate datetime="2009-02-23T07:49:12-08:00">February 23, 2009 at 7:49 am</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p>To resolve the missing &#8216;a&#8217; issue, see:  <a href="http://wiki.github.com/aslakhellesoy/cucumber/troubleshooting" rel="nofollow ugc">http://wiki.github.com/aslakhellesoy/cucumber/troubleshooting</a></p>
				</div><!-- .comment-content -->
			</article><!-- #comment-345 .comment -->
			
	</li><!-- #comment-## -->
	
		<li id="li-comment-346" class="pingback odd alt thread-odd thread-alt depth-1">
			<p class="row">
				<strong class="ping-label span1">Pingback:</strong>
				<span class="span7"><a href='http://pablocantero.com/blog/2010/07/22/cucumber-quicksetup/' rel='external nofollow ugc' class='url'>Cucumber quicksetup at Pablo Cantero</a></span>
			</p>
	
	</li><!-- #comment-## -->
		
		<li  id="li-comment-348" class="comment even thread-even depth-1">
			<article id="comment-348" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/440b8bce4a23ed54c0132db48faa44bc?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/440b8bce4a23ed54c0132db48faa44bc?s=140&#038;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn">cyprian</span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-348"><time pubdate datetime="2011-10-03T19:08:44-07:00">October 3, 2011 at 7:08 pm</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p>Sarah, thanks so much for sharing your efforts.  One question I have is this:<br />
Do you have to use the ruby-rails framework to get webrat to work?  Can you just use garden-variety ruby?  It seems from all the sites I have visited, and the Rspec/Cucumber book I&#8217;m using that webrat is tightly coupled to Ruby-rails.</p>
<p>Any insights you could share would be most appreciated.</p>
				</div><!-- .comment-content -->
			</article><!-- #comment-348 .comment -->
			
	</li><!-- #comment-## -->
		
		<li  id="li-comment-349" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="comment-349" class="comment row">
				<div class="comment-author-avatar span1">
					<img alt='' src='https://secure.gravatar.com/avatar/20ee0d23c969c7740d3c936a4675bb23?s=70&#038;r=g' srcset='https://secure.gravatar.com/avatar/20ee0d23c969c7740d3c936a4675bb23?s=140&#038;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' loading='lazy'/>				</div>
				<footer class="comment-meta span7">
					<p class="comment-author vcard">
						<span class="fn"><a href='https://www.ultrasaurus.com' rel='external nofollow ugc' class='url'>Sarah</a></span> <span class="says">said</span> on <a href="https://www.ultrasaurus.com/2008/12/rails-2-day-3-behavior-driven-development/#comment-349"><time pubdate datetime="2011-10-03T19:41:59-07:00">October 3, 2011 at 7:41 pm</time></a>:					</p><!-- .comment-author .vcard -->
	
						
				</footer><!-- .comment-meta -->
	
				<div class="comment-content span7">
					<p>I believe webrat is designed to work with rack apps, so it would work with Sinatra, but not PHP.  If you want to work with a non-Ruby webapp, look at Capybara using the Mechanize driver.  I wrote a short blog post about that here:  <a href="https://www.ultrasaurus.com/sarahblog/2011/02/legacy-testing-with-capybaramechanize/" rel="nofollow ugc">https://www.ultrasaurus.com/sarahblog/2011/02/legacy-testing-with-capybaramechanize/</a></p>
				</div><!-- .comment-content -->
			</article><!-- #comment-349 .comment -->
			
	</li><!-- #comment-## -->
			</ol><!-- .commentlist .unstyled -->
		
					
		</div><!-- #comments -->
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"><legend>Leave a reply</legend> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2008/12/rails-2-day-3-behavior-driven-development/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://www.ultrasaurus.com/wp-comments-post.php" method="post" id="commentform" class="comment-form"><div class="form-horizontal"><div class="comment-form-comment control-group"><label class="control-label" for="comment">Comment</label><div class="controls"><textarea autocomplete="new-password"  class="span7" id="ef2926a293"  name="ef2926a293"   rows="8" aria-required="true"></textarea><textarea id="comment" aria-hidden="true" name="comment" autocomplete="new-password" style="padding:0 !important;clip:rect(1px, 1px, 1px, 1px) !important;position:absolute !important;white-space:nowrap !important;height:1px !important;width:1px !important;overflow:hidden !important;" tabindex="-1"></textarea><script data-noptimize type="text/javascript">document.getElementById("comment").setAttribute( "id", "a4f3b690531c36843e81e648e5cc9f9d" );document.getElementById("ef2926a293").setAttribute( "id", "comment" );</script></div></div><div class="form-allowed-tags control-group"><label class="control-label">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes: </label><div class="controls"><pre>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; </pre></div></div>
									 <div class="form-actions"><div class="comment-form-author control-group">
				<label for="author" class="control-label">Name</label>
				<div class="controls">
					<input id="author" name="author" type="text" value="" size="30" aria-required='true' />
					<p class="help-inline"><span class="required">required</span></p>
				</div>
			</div>
<div class="comment-form-email control-group">
				<label for="email" class="control-label">Email</label>
				<div class="controls">
					<input id="email" name="email" type="email" value="" size="30" aria-required='true' />
					<p class="help-inline"><span class="required">required</span>, will not be published</p>
				</div>
			</div>
<div class="comment-form-url control-group">
				<label for="url" class="control-label">Website</label>
				<div class="controls">
					<input id="url" name="url" type="url" value="" size="30" />
				</div>
			</div>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='599' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p></div></div></form>	</div><!-- #respond -->
			
		<nav id="nav-single" class="pager">
			<h3 class="assistive-text">Post navigation</h3>
			<span class="next"><a href="https://www.ultrasaurus.com/2008/12/abcd-book/" rel="next">Next Post <span class="meta-nav">&rarr;</span></a></span>
			<span class="previous"><a href="https://www.ultrasaurus.com/2008/12/test-and-behavior-driven-development/" rel="prev"><span class="meta-nav">&larr;</span> Previous Post</a></span>
		</nav><!-- #nav-single -->
		
			</div><!-- #content -->
	</section><!-- #primary -->

<section id="secondary" class="widget-area span4" role="complementary">
	<aside id="recent-comments-2" class="widget well widget_recent_comments"><h2 class="widget-title">Recent Comments</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='https://da.biomarmicrobialtechnologies.com/' rel='external nofollow ugc' class='url'>Silje Randrup</a></span> on <a href="https://www.ultrasaurus.com/2003/08/the-history-of-the-letter-c/#comment-22370">the history of the letter &#8216;C&#8217;</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://x--x.us' rel='external nofollow ugc' class='url'>Paula</a></span> on <a href="https://www.ultrasaurus.com/2003/08/the-history-of-the-letter-c/#comment-19549">the history of the letter &#8216;C&#8217;</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://x--x.us' rel='external nofollow ugc' class='url'>Michelle</a></span> on <a href="https://www.ultrasaurus.com/2003/08/the-history-of-the-letter-c/#comment-19399">the history of the letter &#8216;C&#8217;</a></li><li class="recentcomments"><span class="comment-author-link">Craig</span> on <a href="https://www.ultrasaurus.com/2019/10/http-3-starter-notes-rust-quiche/#comment-18963">http/3 starter notes, rust quiche</a></li><li class="recentcomments"><span class="comment-author-link">Kornel</span> on <a href="https://www.ultrasaurus.com/2019/10/rust-whats-a-tuple-variant/#comment-18539">[rust] what&#8217;s a tuple variant?</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://apromixately.github.io' rel='external nofollow ugc' class='url'>Simon</a></span> on <a href="https://www.ultrasaurus.com/2019/06/essential-rust-tools/#comment-13007">essential rust tools</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://balsamiq.com/company/' rel='external nofollow ugc' class='url'>balsamiqVal</a></span> on <a href="https://www.ultrasaurus.com/2018/10/the-path-is-made-by-walking/#comment-9108">the path is made by walking</a></li><li class="recentcomments"><span class="comment-author-link">Jennifer</span> on <a href="https://www.ultrasaurus.com/2018/07/optimize-for-results-not-optics/#comment-8193">optimize for results, not optics</a></li><li class="recentcomments"><span class="comment-author-link">Bernardo Gomes</span> on <a href="https://www.ultrasaurus.com/2016/06/sailsjs-testing-patterns-trunctate-database/#comment-8058">sailsjs testing: how to truncate the database</a></li><li class="recentcomments"><span class="comment-author-link">Bernardo Gomes</span> on <a href="https://www.ultrasaurus.com/2016/06/sailsjs-testing-patterns-trunctate-database/#comment-8057">sailsjs testing: how to truncate the database</a></li></ul></aside>
		<aside id="recent-posts-2" class="widget well widget_recent_entries">
		<h2 class="widget-title">Recent Posts</h2>
		<ul>
											<li>
					<a href="https://www.ultrasaurus.com/2020/07/hope-is-not-a-strategy/">hope is not a strategy</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2020/01/duck-typing-in-rust-trait-vs-type/">duck typing in rust: trait vs type</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2020/01/writing-c-library-in-rust/">writing c library in rust</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2020/01/rust-on-heroku-with-hyper-http/">rust on heroku with hyper http</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2020/01/rust-on-heroku-with-async-await-and-tokio/">rust on heroku with async/await and tokio</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/12/patterns-of-actions-are-a-making/">patterns of actions are a making</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/12/memory-safety-necessary-not-sufficient/">memory safety: necessary, not sufficient</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/12/brief-history-of-rtmp-future-thoughts/">brief history of rtmp + future thoughts</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/12/rust-2020/">rust 2020: fulfill the promise</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/11/nut-loaf-with-red-pepper-sauce/">nut loaf with red pepper sauce</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/10/http-3-starter-notes-rust-quiche/">http/3 starter notes, rust quiche</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/10/rust-whats-a-tuple-variant/">[rust] what&#8217;s a tuple variant?</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/08/graph-in-rust-using-petgraph/">graph in rust using petgraph</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/06/debugging-openssl-shared-libary/">debugging openssl shared libary</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/06/digital-identity-how-to-verify-trust/">digital identity: how to verify trust?</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/06/essential-rust-tools/">essential rust tools</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/05/learning-scala-with-graphics/">learning scala with graphics</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/04/when-reality-is-broken-change-the-rules/">when reality is broken, change the rules</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/04/subverting-saurons-business-model/">subverting Sauron&#8217;s business model</a>
									</li>
											<li>
					<a href="https://www.ultrasaurus.com/2019/02/firebase-auth-migration-from-rails-and-devise/">firebase auth migration from rails/devise</a>
									</li>
					</ul>

		</aside></section><!-- #secondary .widget-area -->
				<footer id="colophon" role="contentinfo" class="span12">
										<div id="page-footer" class="well clearfix">
						<span class="credits alignleft">&copy; 2021 <a href="https://www.ultrasaurus.com/">the evolving ultrasaurus</a>, all rights reserved.</span>						<div id="site-generator">
							<a	href="http://wordpress.org/"
								title="Semantic Personal Publishing Platform"
								target="_blank"
								rel="generator">Proudly powered by WordPress</a>
						</div>
					</div><!-- #page-footer .well .clearfix -->
									</footer><!-- #colophon -->
							</div><!-- #page -->
		</div><!-- .container -->
	<!-- 48 queries. 0.357 seconds. -->
	<script type='text/javascript' src='https://www.ultrasaurus.com/wp-content/themes/the-bootstrap/js/bootstrap.min.js?ver=2.0.3' id='tw-bootstrap-js'></script>
<script type='text/javascript' src='https://www.ultrasaurus.com/wp-content/themes/the-bootstrap/js/the-bootstrap.min.js?ver=2.0.1' id='the-bootstrap-js'></script>
<script type='text/javascript' src='https://www.ultrasaurus.com/wp-includes/js/wp-embed.min.js?ver=5.7.1' id='wp-embed-js'></script>
	</body>
</html>
