{"id":3057,"date":"2011-02-15T23:11:00","date_gmt":"2011-02-16T07:11:00","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=3057"},"modified":"2011-02-15T23:11:00","modified_gmt":"2011-02-16T07:11:00","slug":"legacy-testing-with-capybaramechanize","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2011\/02\/legacy-testing-with-capybaramechanize\/","title":{"rendered":"legacy testing with capybara\/mechanize"},"content":{"rendered":"<p>I spent a little time working on some tests for a legacy web app that we plan to re-write in Ruby.  Before the big re-write, I thought it would be wise to write some integration tests to call the app via http and verify responses.  I wanted to use vanilla http and not have the overhead of launching a browser and was frustrated that Capybara didn&#8217;t have a driver to suit my needs.<\/p>\n<p>I started down the path of writing tests from scratch using Net::HTTP, but figured that there had to be someone else who had run into this before.  <a href=\"http:\/\/twitter.com\/kakutani\">@kakutani<\/a> told me about <a href=\"https:\/\/github.com\/jeroenvandijk\/capybara-mechanize\">capybara-mechanize<\/a> which seems to be exactly what I need.  <\/p>\n<p>Here&#8217;s my first really basic experiment using RSpec to test a well-known web site:<\/p>\n<pre>\nrequire 'capybara\/rspec'\nrequire 'capybara\/mechanize'\nCapybara.default_driver = :mechanize\n\ndescribe 'web app' do\n  include Capybara\n\n  before do\n    Capybara.app_host = \"http:\/\/www.google.com\"\n  end\n\n  it \"has a copyright\" do\n    visit '\/'\n    page.should have_content('\u00a9 2011')\n  end\n\nend\n<\/pre>\n","protected":false},"excerpt":{"rendered":"<p>I spent a little time working on some tests for a legacy web app that we plan to re-write in Ruby. Before the big re-write, I thought it would be wise to write some integration tests to call the app via http and verify responses. I wanted to use vanilla http and not have the&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2011\/02\/legacy-testing-with-capybaramechanize\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/3057"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=3057"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/3057\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=3057"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=3057"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=3057"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}