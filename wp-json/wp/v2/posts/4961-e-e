{"id":4961,"date":"2014-01-19T19:08:17","date_gmt":"2014-01-20T03:08:17","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=4961"},"modified":"2014-01-19T19:08:36","modified_gmt":"2014-01-20T03:08:36","slug":"ruby-find-latitudelongitude-list-cities","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2014\/01\/ruby-find-latitudelongitude-list-cities\/","title":{"rendered":"ruby to find latitude\/longitude for a list of cities"},"content":{"rendered":"<p>I have a relatively short list of cities which I want to plot on a world map.  The list is a little too long for a manual lookup, but I don&#8217;t know exactly how I&#8217;ll use it in an app, so I figured out how to do it with some simple ruby in irb using the lovely <a href=\"http:\/\/www.rubygeocoder.com\/\">geocoder gem<\/a>.<\/p>\n<p>I had my cities in a spreadsheet.  Selected a few cells, and was able to simply paste into irb and split the string on newlines to get an array of the cities.<\/p>\n<pre>\n\ngem install geocoder\nirb\n&gt;&gt; require 'geocoder\n&gt;&gt; a = \"Honolulu, HI\n&gt;&gt; Boston, MA\n&gt;&gt; New York, NY\".split(\"\\n\")\n =&gt; [\"Honolulu, HI\", \"Boston, MA\", \"New York, NY\"] \n\n&gt;&gt;a.map do |city| \n    d = Geocoder.search(city)\n    ll = d[0].data[\"geometry\"][\"location\"]\n    puts \"#{city}\\t#{ll['lat']}\\t#{ll['lng']}\" \nend\n\nHonolulu, HI    21.3069444  -157.8583333\nBoston, MA  42.3584308  -71.0597732\nNew York, NY    40.7143528  -74.00597309999999\n\n<\/pre>\n<p>Then I could copy\/paste the irb output back into my spreadsheet.  Ta Da!<\/p>\n<p>It appears that the free Google API has some kind of throttling, so this is only good for short lists of &lt;20 cities.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I have a relatively short list of cities which I want to plot on a world map. The list is a little too long for a manual lookup, but I don&#8217;t know exactly how I&#8217;ll use it in an app, so I figured out how to do it with some simple ruby in irb using&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2014\/01\/ruby-find-latitudelongitude-list-cities\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[2],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/4961"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=4961"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/4961\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=4961"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=4961"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=4961"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}