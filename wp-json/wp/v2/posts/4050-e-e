{"id":4050,"date":"2013-07-13T16:52:45","date_gmt":"2013-07-14T00:52:45","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=4050"},"modified":"2013-07-13T16:52:45","modified_gmt":"2013-07-14T00:52:45","slug":"tesseract-html-page-with-text-overlay","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2013\/07\/tesseract-html-page-with-text-overlay\/","title":{"rendered":"tesseract html page with text overlay"},"content":{"rendered":"<p>I&#8217;m learning a bit about OCR, and wanted to get some hands on experience using the open source Tesseract to get a feel for how it works. I&#8217;m a long way from any reasonable visual or interaction design, but the result of today&#8217;s exploration is an html page where the original image is overlaid with machine generated text in roughly the right location.  This page looks like crap, but it&#8217;s a neat first step (click on the image below to see the full html page):<\/p>\n<p><a href=\"http:\/\/ultrasaurus.github.io\/hocr-javascript\/letter.html\"><img src=\"http:\/\/monosnap.com\/image\/gvFJZ4174Y8MQbqWvcewB3BVl.png\"><br \/>\n<\/a><\/p>\n<h2>Tesseract<\/h2>\n<p><a href=\"https:\/\/code.google.com\/p\/tesseract-ocr\/\">Tesseract<\/a> is an open source OCR tool (Apache 2.0 license) that produces fairly accurate output (relative to its open source peers) for scanned, type-written documents in English and many other languages.<\/p>\n<p>On the Mac, we can easily install it with homebrew:<\/p>\n<pre>\nbrew install tesseract\n<\/pre>\n<p>The latest version supports lots of different input image types, via <a href=\"https:\/\/code.google.com\/p\/leptonica\/\">Leptonica<\/a>, an open source C library for efficient image processing and image analysis operations. <\/p>\n<p>If you just want to get text from an image, check the <a href=\"https:\/\/code.google.com\/p\/tesseract-ocr\/wiki\/ReadMe\">ReadMe file<\/a>.  I wanted to display the generated text over the image, which Tesseract supports via the <a href=\"https:\/\/docs.google.com\/document\/d\/1QQnIQtvdAC_8n92-LhwPcjtAUFwBlzE8EWnKAxlgVf0\/preview\">HOCR format<\/a>.   <\/p>\n<p>Each word, line, and block of text, is annotated with an HTML tag.  I look at just the word element, which is generated as a span tag with the attribute title:<\/p>\n<pre>\n&lt;span class=&quot;ocrx_word&quot; id=&quot;word_14&quot; title=&quot;bbox 398 506 471 527&quot; &gt;WHOM&lt;\/span&gt;\n<\/pre>\n<p>I wrote a little javascript to create a style tag from the bbox attribute:<\/p>\n<pre>\nManuscript.bboxToStyle = function(bbox_str) {\n  arr = bbox_str.split(\" \");\n  left_pos = \"left:\"+arr[1]+\"px; \";\n  top_pos = \"top:\"+arr[2]+\"px; \";\n  right_pos = \"right:\"+arr[3]+\"px; \";\n  bottom_pos = \"bottom:\"+arr[4]+\"px; \";\n  return left_pos + top_pos + right_pos + bottom_pos;\n};\n<\/pre>\n<p>Then used jQuery to apply that to every word element:<\/p>\n<pre>\n$(document).ready(function() {\n    $(\".ocrx_word\").attr('style', function() {\n        return Manuscript.bboxToStyle(this.title);\n        });\n});\n<\/pre>\n<p>Resulting in word elements that are positioned roughly where they appear in the image:<\/p>\n<pre>\n&lt;span class=&quot;ocrx_word&quot; id=&quot;word_14&quot; title=&quot;bbox 398 506 471 527&quot; \nstyle=&quot;left:398px; top:506px; right:471px; bottom:527px; &quot;&gt;WHOM&lt;\/span&gt;\n<\/pre>\n<p>I tried to experiment with the background-color of the words, but that&#8217;s not working for some reason.  <a href=\"https:\/\/github.com\/ultrasaurus\/hocr-javascript\">Complete source on GitHub.<\/a><\/p>\n<p>Would love to hear about anyone else creating HTML UI for OCR results, either with Tesseract or other open source tools.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I&#8217;m learning a bit about OCR, and wanted to get some hands on experience using the open source Tesseract to get a feel for how it works. I&#8217;m a long way from any reasonable visual or interaction design, but the result of today&#8217;s exploration is an html page where the original image is overlaid with&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2013\/07\/tesseract-html-page-with-text-overlay\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[2],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/4050"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=4050"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/4050\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=4050"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=4050"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=4050"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}