{"id":2649,"date":"2010-05-04T22:26:33","date_gmt":"2010-05-05T06:26:33","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=2649"},"modified":"2010-05-04T22:26:33","modified_gmt":"2010-05-05T06:26:33","slug":"jruby-on-google-app-engine","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2010\/05\/jruby-on-google-app-engine\/","title":{"rendered":"jruby on google app engine"},"content":{"rendered":"<p><img src=\"http:\/\/rails-depot.appspot.com\/images\/appengine_ruby.png\" alt=\"app engine logo\" align=\"right\" \/>John Woodell (<a href=\"http:\/\/twitter.com\/johnwoodell\">@johnwoodell<\/a>) gave an excellent talk at the <a href=\"http:\/\/www.meetup.com\/appengine\/calendar\/13303709\/\">App Engine Meetup<\/a> this evening on using Ruby on Google&#8217;s AppEngine. After some highlights of App Engine and a tour of three real-world use cases, John gave a series of quick demos of what seem to be very well-documented resources for getting started.  I built the simple &#8220;hello&#8221; Sinatra app during his talk which was pretty satisfying.\u00a0 I was distracted by my success with the first app, so I missed some of his Rails presentation, but it looks like the docs go through what he demo&#8217;d.<\/p>\n<h2>Overview<\/h2>\n<p>Key Features<\/p>\n<ul>\n<li> No need to install or maintain your own stack<\/li>\n<li> &#8220;We do the scaling for you&#8221; -&gt; Google services via standard APIs<\/li>\n<li> Charge only for actual usage \u2013 Always free to get started<\/li>\n<li> Built-in application management console (pretty sweet)<\/li>\n<\/ul>\n<p>Gotchas<\/p>\n<ul>\n<li> no native code<\/li>\n<li> no sockets or thread<\/li>\n<li> no writing to the files system<\/li>\n<li>30 seconds to do your work, then the request times out (issues with initialization in Rails, but they&#8217;ve developed a &#8220;deferred dispatch&#8221; workaround)<\/li>\n<li>takes several seconds to &#8220;spin up&#8221; a new JRuby instance when your app first starts or your load spikes<\/li>\n<\/ul>\n<p>Good things to know<\/p>\n<ul>\n<li>AppEngine datastore has no schema.<\/li>\n<li>Reads are always the same speed no matter how big your data store, writes are slower<\/li>\n<li>You use <strong>DataMapper<\/strong> rather than ActiveRecord.<\/li>\n<li>memcache API is available<\/li>\n<li>URL Fetch API is a drop-in replacement for Net::HTTP<\/li>\n<li>as of today, there will be a release where openssl &#8220;just works&#8221; for the first time<\/li>\n<\/ul>\n<p>Matthew Blain, the engineer for the main bulkloader tool, gave a short talk about it.\u00a0 Bulkloader lets you put data into the AppEngine data store. You can use it to import data or to move from one AppEngine app to another.\u00a0 It currently supports limited input:\u00a0 csv and simple xml.\u00a0 It also supports &#8220;simple text&#8221; for output.\u00a0 You can write any connector you want.<\/p>\n<p>Some real world references to people using Ruby on App Engine:<\/p>\n<ul>\n<li><a href=\"http:\/\/azazeal.xelixis.net\/post\/Starting-your-business-in-less-than-a-week-with-Rails-on-Google-App-Engine.aspx\">real world app using JRuby, Rails and App Engine<\/a> (<a href=\"http:\/\/twitter.com\/@azazeal\">azazeal<\/a>)<\/li>\n<li><a href=\"http:\/\/www.codingforrent.com\/\">http:\/\/www.codingforrent.com\/<\/a><\/li>\n<li>iPhone \/ iPad app with JSON interface: <a href=\"http:\/\/www.johntwang.com\/blog\/2010\/04\/23\/json-with-ruby-on-rails-on-google-appengine\/\">blog post<\/a> and <a href=\"http:\/\/gist.github.com\/377353\">gist<\/a> by John Wang <br \/>[update from John Woodell&#8217;s comment]<\/li>\n<\/ul>\n<p>Very nice <a href=\"http:\/\/code.google.com\/p\/appengine-jruby\/wiki\/GettingStarted\">getting started guide<\/a>, which I followed to build a Sinatra app in about 5 minutes.<\/p>\n<pre>sudo gem install google-appengine\nappcfg.rb generate_app hello\ndev_appserver.rb hello<\/pre>\n<p>After this I had an app running locally at http:\/\/localhost:8080\/ &#8212; I find it unsettling to hear that the dev app is running on whatever Ruby I have, but when I deploy it is JRuby.\u00a0 John reassures me that the only real glitch that I&#8217;ll run into is if I have a gem with native code, for which there aren&#8217;t also java extensions (or an alternate pure Ruby implementation).<\/p>\n<p>Installation notes: hasn&#8217;t been tested with rvm, the env is there, so you don&#8217;t need it.  gems are stored in a jar file, kept in .gems\/bundler_gems in your app directory<\/p>\n<p>Then to deploy my app on App Engine, I needed to use my Google account to register an app. I picked the name &#8220;hello-sarah&#8221; which I then added to my config.ru.\u00a0 I also added a little snippet of Ruby code to the Rack app to report the current time, so I could tell it was mine.<\/p>\n<p><img src=\"http:\/\/img.skitch.com\/20100505-kfetd3f8wsex4mradgc94s8m56.png\" alt=\"\" \/><\/p>\n<p>Then I typed some magic words into my local command line:<\/p>\n<pre>cd hello\/\nappcfg.rb update .\n<\/pre>\n<p>Then my app was live at: <a href=\"http:\/\/hello-sarah.appspot.com\/\">http:\/\/hello-sarah.appspot.com\/<\/a><\/p>\n<p>Since I tweeted it, I got a chance to see how the application dashboard works.  Here&#8217;s what it looks like for this app which was first deployed a few hours ago:<br \/>\n<img src=\"http:\/\/img.skitch.com\/20100505-fcre698bqgtxrw6bf2p298htwe.png\" alt=\"dashboard\" \/><\/p>\n","protected":false},"excerpt":{"rendered":"<p>John Woodell (@johnwoodell) gave an excellent talk at the App Engine Meetup this evening on using Ruby on Google&#8217;s AppEngine. After some highlights of App Engine and a tour of three real-world use cases, John gave a series of quick demos of what seem to be very well-documented resources for getting started. I built the&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2010\/05\/jruby-on-google-app-engine\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/2649"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=2649"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/2649\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=2649"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=2649"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=2649"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}