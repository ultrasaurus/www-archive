{"id":370,"date":"2008-05-04T18:25:47","date_gmt":"2008-05-05T02:25:47","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/wordpress\/?p=370"},"modified":"2008-05-04T18:25:47","modified_gmt":"2008-05-05T02:25:47","slug":"moveabletype-4-and-dealing-with-comment-spam","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2008\/05\/moveabletype-4-and-dealing-with-comment-spam\/","title":{"rendered":"moveabletype 4 and dealing with comment spam"},"content":{"rendered":"<p>I&#8217;ve been letting comments build up in my moderation queue, since I have been overwhelmed by the amount of spam.  Today, I decided to upgrade to mt4 to see if the new version offered anything better.  I got a 500 error at first, but found in my apache logs:<\/p>\n<p>error:  &#8220;file is writable by others&#8221;<br \/>\nFound via google that I needed to: chmod 755<br \/>\nI usually just a+x, but that seemed to work.<\/p>\n<p>Other than that, MovableType was a delight to install, as always.<\/p>\n<p>Eek!  All of the comments I had marked as junk were simply unpublished after the upgrade.  I couldn&#8217;t deal with 45,000 comments via the GUI, so I decided to walk on the edge and edit directly via SQL&#8230; I had just backed up my database, right?<\/p>\n<p>So&#8230; for the record, this is what worked:<br \/>\nmysql&gt; DELETE FROM mt_comment WHERE comment_visible IS NULL;<br \/>\nQuery OK, 45176 rows affected (7.54 sec)<\/p>\n<p>Then, I decide to go after my trackback spam:<br \/>\nmysql&gt; DELETE FROM mt_tbping WHERE tbping_blog_name LIKE &#8220;%Jhony%&#8221;;<br \/>\nQuery OK, 46535 rows affected (5.31 sec)<\/p>\n<p>mysql&gt; DELETE FROM mt_tbping WHERE tbping_blog_name LIKE &#8220;%sex%&#8221;;<br \/>\nQuery OK, 37 rows affected (0.03 sec)<\/p>\n<p>mysql&gt; DELETE FROM mt_tbping WHERE tbping_blog_name LIKE &#8220;%loans%&#8221;;<br \/>\nQuery OK, 171 rows affected (0.04 sec)<\/p>\n<p>finally, I decided my time was more important than finding the elusive valid trackback, so I deleted them all:<\/p>\n<p>mysql&gt; DELETE FROM mt_tbping;<\/p>\n<p>Ok, all is good, or so I thought.   I&#8217;ve got my old blog with the new MT.  However, I wanted to try out authentication for comments, but when I turn it on, I get an error when I post a new comment that registration is required.  I suppose I need to update my &#8220;Entry&#8221; template, so I look up the MT4 <a href=\"http:\/\/www.movabletype.org\/documentation\/designer\/movable-type-40-default-templa.html\">default templates<\/a>. However, if I paste in the <a href=\"http:\/\/www.movabletype.org\/default_templates\/4.0\/entry.mtml\">entry template<\/a>, I get an error.  Sigh.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I&#8217;ve been letting comments build up in my moderation queue, since I have been overwhelmed by the amount of spam. Today, I decided to upgrade to mt4 to see if the new version offered anything better. I got a 500 error at first, but found in my apache logs: error: &#8220;file is writable by others&#8221;&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2008\/05\/moveabletype-4-and-dealing-with-comment-spam\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a> <a href=\"https:\/\/www.ultrasaurus.com\/2008\/05\/moveabletype-4-and-dealing-with-comment-spam\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[1],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/370"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=370"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/370\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=370"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=370"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=370"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}