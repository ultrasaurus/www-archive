{"id":927,"date":"2009-03-10T02:07:23","date_gmt":"2009-03-10T10:07:23","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=927"},"modified":"2009-03-10T02:07:23","modified_gmt":"2009-03-10T10:07:23","slug":"git-submodule-gotcha","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2009\/03\/git-submodule-gotcha\/","title":{"rendered":"git submodule gotcha"},"content":{"rendered":"<p>I anticipate enjoying git submodules for all of the various and sundry dependencies for my project.  However there is a bit of a gotcha with my specific use case.  It&#8217;s seems I&#8217;m <a href=\"http:\/\/blog.buildingwebapps.com\/2008\/5\/20\/got-git-submodules-not-a-go-go\">not alone<\/a>, but I thought I&#8217;d write this up for others who may into the same thing (and for my own future reference).<\/p>\n<p>The issue happens when you have a directory that is checked into git and you decide to delete the directory of checked in files and add a submodule instead.  Seems like a common use case to me, but perhaps the creators of git submodules didn&#8217;t thinks so.  This happened to me in the move from subversion to git.  Initially, all of the plugins were accessed as svn externals; however they were not available via git and I wanted to do one migration at a time, so I just checked the source of all of them into vender\/plugins.  Later, I dug up references to various git repositories where the plugins are now available, and created subrepositories &#8212; awesome, right?  <\/p>\n<p>The gotcha comes when I switch branches back and forth between the &#8220;master&#8221; (no submodules, but with checked in source) and &#8220;dev&#8221; (where my submodule work is).  Here&#8217;s what happens:<\/p>\n<pre>\n$ git checkout master\nerror: Untracked working tree file 'vendor\/plugins\/acts_as_list\/lib\/active_record\/acts\/list.rb' would be overwritten by merge.\n<\/pre>\n<p>Here&#8217;s my workaround&#8230;<br \/>\n<strong>To go back to a branch w\/o submodules<\/strong><\/p>\n<pre>\n$ rm -rf vendor\/plugins\n$ git checkout master\n$ git checkout vendor\/plugins\n<\/pre>\n<p><strong>To go back to a branch w\/ submodules<\/strong><\/p>\n<pre>\ngit checkout dev\ngit submodule update --init\n<\/pre>\n<p>Update: another gotcha, when I tried to merge dev into master I got &#8220;fatal: cannot read object&#8230; It is a submodule!&#8221; found the answer <a href=\"http:\/\/n2.nabble.com\/git-submodule-merge-madness-td2135496.html\">here<\/a> and it worked for me:<\/p>\n<pre>\ngit merge -s  resolve\n<\/pre>\n<p>For the record, I&#8217;m working with git version 1.6.1<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I anticipate enjoying git submodules for all of the various and sundry dependencies for my project. However there is a bit of a gotcha with my specific use case. It&#8217;s seems I&#8217;m not alone, but I thought I&#8217;d write this up for others who may into the same thing (and for my own future reference).&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2009\/03\/git-submodule-gotcha\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[2],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/927"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=927"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/927\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=927"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=927"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=927"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}