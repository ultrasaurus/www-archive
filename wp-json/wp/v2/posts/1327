{"id":1327,"date":"2009-05-18T08:23:32","date_gmt":"2009-05-18T16:23:32","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=1327"},"modified":"2009-05-18T08:23:32","modified_gmt":"2009-05-18T16:23:32","slug":"bash-context","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2009\/05\/bash-context\/","title":{"rendered":"bash context"},"content":{"rendered":"<p>Sometimes it takes quite an effort to be a &#8220;lazy programmer&#8221; (as in Larry Wall&#8217;s <a href=\"http:\/\/en.wikipedia.org\/wiki\/Larry_Wall#Virtues_of_a_programmer\">virtues of a programmer<\/a>).  I&#8217;ve been trying to optimize my workflow as I run into things that make for repetitive typing.  I find when I can type less, I have more cycles to think.  One of my favorite tools in laziness is bash scripting, but I&#8217;m still learning its ins and outs.<\/p>\n<p><strong>The problem<\/strong>: Lately I&#8217;ve been switching between subversion trees in OpenLaszlo.  (Someday I want to convince the team to switch to git, but I&#8217;m not sure that would even solve the problem completely, since I also like having multiple webapps installed.)  So I&#8217;ve got trunk checked out in different directories: a clean one for testing, one I keep for code reviews, a sandbox for whatever I&#8217;m working on at the moment, etc. Every time I switch OpenLaszlo contexts, I need to redefine $LPS_HOME environment variable and cd into that directory.  Should be simple, huh?<\/p>\n<pre>\nBRANCH=\"trunk\"\n[ -n \"$1\" ] &amp;&amp; BRANCH=\"$BRANCH-$1\"\n\necho \"BRANCH=$BRANCH\"\n\nexport LPS_HOME=\/Users\/sarah\/src\/svn\/openlaszlo\/$BRANCH\ncd \"\/Users\/sarah\/src\/svn\/openlaszlo\/$BRANCH\"\npwd\n<\/pre>\n<p>Except this didn&#8217;t work.  It seemed that &#8216;cd&#8217; had no effect and $LPS_HOME wasn&#8217;t modified.  WTF?  Lacking someone to look over my shoulder in my new solo work situation, I emailed my friend <a href=\"http:\/\/www.antisleep.com\">Scott Evans<\/a> from whom I have learned much bash lore. He emailed me the following:<\/p>\n<p>1) use &#8220;.&#8221; to run the script, which runs it in your shell process instead<br \/>\nof in a child one.<\/p>\n<p>2) use a bash function instead &#8212; these run in your current environment.<br \/>\ntry something like this in your bashrc\/bash_profile:<\/p>\n<pre>\ntrunk() {\n echo \"dollar 1: ${1}\"\n if [ -n \"${1}\" ] ; then\n   export LPS_HOME=\/Users\/sarah\/src\/svn\/openlaszlo\/trunk-${1}\n else \n   export LPS_HOME=\/Users\/sarah\/src\/svn\/openlaszlo\/trunk\n fi\n\n cd $LPS_HOME\n pwd\n}\n<\/pre>\n<p>Note that I didn&#8217;t set something like $TRUNK there &#8212; since the thing is running in your shell environment, it&#8217;s good practice not to potentially step on existing variables, or leave any variables defined after the fact.<\/p>\n<p>Thanks Scott!  Posting here so that I will always remember what I learned today and maybe some other folk will find it helpful.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Sometimes it takes quite an effort to be a &#8220;lazy programmer&#8221; (as in Larry Wall&#8217;s virtues of a programmer). I&#8217;ve been trying to optimize my workflow as I run into things that make for repetitive typing. I find when I can type less, I have more cycles to think. One of my favorite tools in&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2009\/05\/bash-context\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[2],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/1327"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=1327"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/1327\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=1327"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=1327"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=1327"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}