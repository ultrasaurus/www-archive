{"id":1254,"date":"2009-05-06T09:00:00","date_gmt":"2009-05-06T17:00:00","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=1254"},"modified":"2009-05-06T09:00:00","modified_gmt":"2009-05-06T17:00:00","slug":"on-apis-more-craft-less-magic","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2009\/05\/on-apis-more-craft-less-magic\/","title":{"rendered":"on APIs: more craft, less magic"},"content":{"rendered":"<p>I&#8217;ve spent a lot of years creating developer tools. Even for the software that did not target developers, there were always APIs for other vendors to create extensions or to use internally between different modules.\u00a0 One the interview questions I like is &#8220;have you ever designed an API?&#8221; followed by &#8220;what do you (would you) consider in designing an API?&#8221;\u00a0 There&#8217;s typically a trade-off between flexibility and getting the job done concisely and with a great engineer this usually turns into an interesting conversation.<\/p>\n<p>I&#8217;ve been using Rails for a while now and one of the things that seems awesome at first is the breathtaking speed at which you can create a basic web application with full XML and JSON APIs.\u00a0 For someone who doesn&#8217;t love picking which XML parser to use and digging through a DOM just to hook the client and server together, this is a beautiful thing.\u00a0 However, I&#8217;ve noted a peculiar absence in conventions for API design, and a void in tools for testing and documentation.\u00a0 (I am relatively new to Rails, so if I&#8217;ve missed some obvious resources, please let me know.)<\/p>\n<p>Rails seems to assume that you want to expose your database object model transparently through your API.\u00a0 In my experience, this is rarely what you want to do. In fact, it is a crazy way to live.\u00a0 It kind of assumes that you have just one engineer that writes the client code and the server code and updates them both all the time.\u00a0 This makes complete sense for HTML which is closely integrated with the Rails model and controller code, but not when you have multiple code bases in various languages which are using the web services.<\/p>\n<p>Instead, I typically think about the use cases that the client software needs and craft an API around that.\u00a0 Usually this is a small subset of the internal objects and methods.\u00a0 Also, in writing client-server software (which is what you are doing with Ajax, Flash or a mobile app), you want to keep the number of network requests small.\u00a0 For common use cases, it is a good idea to bundle calls together.\u00a0 There are a lot of approaches to this, and I&#8217;m currently looking at the Rails 2.3 nested model feature, but I think that solves just one common use case.<\/p>\n<p>The other challenge with developing APIs is that over time your software changes&#8230; maybe your first version was wildly successful and now you have thousands (or millions) of people who have installed your code on their phone (or desktop).\u00a0 Now when you refactor your core models to improve performance and don&#8217;t change any behavior, you certainly don&#8217;t want to break everyone&#8217;s app or make them download new software. Even if you add features, you probably want the old versions of the app to keep working while you encourage people to download your new, better thing.\u00a0 There are a lot of well-used approaches for fixing this too.<\/p>\n<p>I&#8217;d hate to see CORBA added to Rails, but this seems like an area where conventions (and maybe a little shared code) would be valuable.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I&#8217;ve spent a lot of years creating developer tools. Even for the software that did not target developers, there were always APIs for other vendors to create extensions or to use internally between different modules.\u00a0 One the interview questions I like is &#8220;have you ever designed an API?&#8221; followed by &#8220;what do you (would you)&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2009\/05\/on-apis-more-craft-less-magic\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/1254"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=1254"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/1254\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=1254"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=1254"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=1254"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}