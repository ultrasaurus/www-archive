{"id":3573,"date":"2012-03-30T12:39:44","date_gmt":"2012-03-30T20:39:44","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=3573"},"modified":"2012-03-30T12:39:44","modified_gmt":"2012-03-30T20:39:44","slug":"d3-js-experiments-in-the-console","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2012\/03\/d3-js-experiments-in-the-console\/","title":{"rendered":"d3.js experiments in the console"},"content":{"rendered":"<p>d3 (aka Data-Driven Documents) is a great little JavaScript framework for data visualization.  It&#8217;s got a nice declarative syntax for DOM manipulation that&#8217;s quite readable, but takes a bit of effort to understand exactly what it&#8217;s doing.<\/p>\n<p>Favorite links:<\/p>\n<ul>\n<li>UPDATE: <a href=\"http:\/\/www.dashingd3js.com\/\">Dashing D3.js<\/a> is an amazing series of tutorials with great conceptual grounding<\/li>\n<li><a href=\"http:\/\/mbostock.github.com\/d3\/api\/\">d3 tutorials<\/a> provide a great conceptual foundation<\/li>\n<li><a href=\"http:\/\/bost.ocks.org\/mike\/join\/\">Thinking with Joins<\/a> by d3 creator, Mike Bostick, helps explain the syntax for chaining methods<\/li>\n<li><a href=\"http:\/\/alignedleft.com\/tutorials\/d3\/\">Scott Murray&#8217;s d3 tutorial<\/a> offers a very nice step-by-step, covering a lot of the same ground as my little tutorial below with excellent discussions of the fundamentals.<\/li>\n<\/ul>\n<p>I like to understand stuff by playing with it interactively, so I created a skeleton index.html which just includes d3.js and a style a div where I&#8217;ll display some data.<\/p>\n<p>UPDATE: blank file below posted <a href=\"http:\/\/ultrasaurus.github.com\/d3js-examples\/simple-div.html\">here<\/a><\/p>\n<pre>\n&lt;html&gt;<br \/>&nbsp;&nbsp;&lt;head&gt;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;d3&nbsp;experiment&lt;\/title&gt;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;type=&quot;text\/javascript&quot;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;src=&quot;https:\/\/raw.github.com\/mbostock\/d3\/master\/d3.js&quot;&gt;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;\/script&gt;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&nbsp;type=&quot;text\/css&quot;&gt;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.box&nbsp;{<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;skyblue;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;24px;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;18px;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding:&nbsp;4px;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin:&nbsp;1px;<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br \/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;\/style&gt;<br \/>&nbsp;&nbsp;&lt;\/head&gt;<br \/>&nbsp;&nbsp;&lt;body&gt;<br \/>&nbsp;&nbsp;&lt;\/body&gt;<br \/>&lt;\/html&gt;<br \/><br \/><br \/><br \/>\n<\/pre>\n<p>Then in the FireBug console, we can interact with d3, the top-level object that allows us to access all of d3&#8217;s goodness.<\/p>\n<pre>\n&gt;&gt;&gt; d3\nObject { version=\"3.0.1\", random={...}, ns={...}, more...}\n&gt;&gt;&gt;  body = d3.select(\"body\")\n[[body]]\n<\/pre>\n<p>Like jQuery, d3 let&#8217;s us &#8220;select&#8221; one or more DOM elements to operate on them.  I only have one body tag, so I just get one element in an array &#8212; not yet sure why it needs a nested array.  Now I can manipulate the DOM:<\/p>\n<pre>\n&gt;&gt;&gt;  body.append('p').text('Hello d3!')\n[[p]]\n<\/pre>\n<p>and &#8220;Hello d3!&#8221; appears at the top of my page.  Yay!  Of course that could have been written in a single line like:<\/p>\n<pre>\nd3.select(\"body\").append('p').text('Hello d3!')\n<\/pre>\n<p>and if I want to change the text, I can use a regular old css selector to grab the paragraph element I just created:<\/p>\n<pre>\nd3.select(\"body p\").text(\"Welcome to d3\")\n<\/pre>\n<p>or, using the reference to the &#8216;body&#8217; variable I created above:<\/p>\n<pre>\nbody.select(\"p\").text(\"d3 is cool\")\n<\/pre>\n<h2>Data-driven Boxes<\/h2>\n<p>Ok, now that we understand the basics, let&#8217;s put some boxes on the page:<\/p>\n<pre>\nbody.append('div').attr('class','box')\n<\/pre>\n<p>and let&#8217;s add a couple with text in them:<\/p>\n<pre> \nbody.append('div').attr('class','box').text('hi')\nbody.append('div').attr('class','box').text('foo')\n<\/pre>\n<p>With my set of boxes, I can select one or all of them:<\/p>\n<pre>\n&gt;&gt;&gt; d3.select('.box')\n[[div.box]]\n&gt;&gt;&gt; d3.selectAll('.box')\n[[div.box, div.box, div.box]]\n<\/pre>\n<p>Then I can specify data to <em>bind<\/em> to each box and display it.  I&#8217;ve read that d3 can deal with all sorts of data (like json, csv, etc.) but we&#8217;ll start with an array of numbers.<\/p>\n<pre>\n&gt;&gt;&gt; my_data = [20, 7, 32]\n[20, 7, 32]\n&gt;&gt;&gt; d3.selectAll('.box').data(my_data).text( function(d) { return d } )\n[[div.box, div.box, div.box]]\n<\/pre>\n<p><img src=\"https:\/\/img.skitch.com\/20120330-jb12cx9qa7p16diptgy6kqjq6c.png\" \/><br \/>\n<img src=\"https:\/\/img.skitch.com\/20120330-qhkt419gnaqh2d9f5s53xns6nh.png\" \/><\/p>\n<p>We can see that our data is associated with the DOM element and we can get at it via JavaScript in the console.  (Of course, we should only do that for debugging. I would guess that __data__ is the private implementation of d3&#8217;s data binding.)<\/p>\n<pre>\n&gt;&gt;&gt; d3.select('.box')[0][0].__data__\n20\n<\/pre>\n<p>We can change the data like this:<\/p>\n<pre>\n&gt;&gt;&gt; new_data = [10, 50, 25]\n[10, 50, 25]\n&gt;&gt;&gt; d3.selectAll('.box').data(new_data)\n<\/pre>\n<p>You&#8217;ll see that the page doesn&#8217;t change visually, but in the console, you can see that the data does:<br \/>\n<img src=\"https:\/\/img.skitch.com\/20120330-kwnsfr1kiuaskauqeruib7in3d.png\" \/><\/p>\n<p>We need to explicitly tell d3 to do something with the data like this:<\/p>\n<pre>\nd3.selectAll('.box').text( function(d) { return d } )\n<\/pre>\n<p>We can also use this handy shortcut:<\/p>\n<pre>\nd3.selectAll('.box').text( String )\n<\/pre>\n","protected":false},"excerpt":{"rendered":"<p>d3 (aka Data-Driven Documents) is a great little JavaScript framework for data visualization. It&#8217;s got a nice declarative syntax for DOM manipulation that&#8217;s quite readable, but takes a bit of effort to understand exactly what it&#8217;s doing. Favorite links: UPDATE: Dashing D3.js is an amazing series of tutorials with great conceptual grounding d3 tutorials provide&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2012\/03\/d3-js-experiments-in-the-console\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[2],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/3573"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=3573"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/3573\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=3573"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=3573"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=3573"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}