{"id":3893,"date":"2013-06-06T23:05:13","date_gmt":"2013-06-07T07:05:13","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=3893"},"modified":"2013-06-06T23:05:13","modified_gmt":"2013-06-07T07:05:13","slug":"ffmpeg-for-ogg-and-webm","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2013\/06\/ffmpeg-for-ogg-and-webm\/","title":{"rendered":"ffmpeg for ogg and webm"},"content":{"rendered":"<p>I wanted to experiment with Ogg and WebM and the &lt;video&gt; tag, and I thought the easiest way would be with my favorite command-line transcoder, ffmpeg.  It&#8217;s fabulous support for just about every audio and video file format makes it fabulous for hacking.<\/p>\n<p>Sadly &#8220;brew install ffmpeg&#8221; doesn&#8217;t support the new file formats and codecs, so I had to compile it myself, as well as the codec libraries.  Here&#8217;s what worked (on MacOSX Mountain Lion):<\/p>\n<p>0. <strong>Clone from git and use a stable branch<\/strong><br \/>\nCheck the bottom of the <a href=\"http:\/\/www.ffmpeg.org\/download.html\">download page<\/a> for descriptions of latest stable versons.<\/p>\n<pre>git clone git:\/\/source.ffmpeg.org\/ffmpeg.git ffmpeg<\/pre>\n<p>Look for the version tag you want with: <code>git tag -l<\/code><br \/>\nI picked 1.2.1 &#8220;Magic&#8221;<\/p>\n<pre>git checkout -b n1.2.1<\/pre>\n<p>1. <strong>Install Xcode, Homebrew, then and Remaining Dependendencies<\/strong><br \/>\nfollowing <a href=\"http:\/\/ffmpeg.org\/trac\/ffmpeg\/wiki\/MacOSXCompilationGuide\">MacOSXCompilationGuide<\/a> instructions.<\/p>\n<p>2. Compile libvpx (needed for WebM)<br \/>\nI took these instructions from the <a href=\"http:\/\/ffmpeg.org\/trac\/ffmpeg\/wiki\/UbuntuCompilationGuide\">UbuntuCompilationGuide<\/a>, and swapped out the prefix to be what the Mac instructions told me to do:<br \/>\n<code><br \/>\n git clone --depth 1 http:\/\/git.chromium.org\/webm\/libvpx.git<br \/>\ncd libvpx<br \/>\n.\/configure --prefix=\/usr\/local --disable-examples<br \/>\nmake<br \/>\nsudo make install<br \/>\nmake clean<br \/>\ncd ..<br \/>\n<\/code><\/p>\n<p>3. Configure &amp; build ffmpeg<br \/>\nI picked just the libraries I needed plus whatever didn&#8217;t require extra dependencies:<\/p>\n<pre>\n.\/configure --enable-gpl --enable-version3 --enable-nonfree --enable-postproc --enable-libaacplus --enable-libcelt --enable-libfaac --enable-libfdk-aac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-openssl --enable-libopus --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvo-aacenc --en\nmake &amp;&amp; make install\n<\/pre>\n<h2>Ready to Make Movies!<\/h2>\n<h3>Ogg Theora\/Vorbis<\/h3>\n<p>I just followed the instructions on the <a href=\"http:\/\/ffmpeg.org\/trac\/ffmpeg\/wiki\/TheoraVorbisEncodingGuide\">ffmpeg wiki<\/a> I used lower video and audio quality since the wiki recommendations ended up creating a huge file.<\/p>\n<pre>ffmpeg -i mymovie.mov -codec:v libtheora -qscale:v 3 -codec:a libvorbis -qscale:a 3 mymovie.ogv\n<\/pre>\n<h3>WebM<\/h3>\n<pre>ffmpeg -i mymovie.mov -vcodec libvpx -acodec libvorbis mymovie.webm<\/pre>\n<p>size chart<\/p>\n<pre>\n 2788953  pool-480p.mov\n19459157  pool.mov\n 2870873  pool.mp4\n  833597  pool.webm\n 3022359  pool3v3a.ogv\n 4398308  pool4v3a.ogv\n 5755066  pool5v5a.ogv\n 7767888  pool6v5a.ogv\n11424378  pool7v5a.ogv\n<\/pre>\n","protected":false},"excerpt":{"rendered":"<p>I wanted to experiment with Ogg and WebM and the &lt;video&gt; tag, and I thought the easiest way would be with my favorite command-line transcoder, ffmpeg. It&#8217;s fabulous support for just about every audio and video file format makes it fabulous for hacking. Sadly &#8220;brew install ffmpeg&#8221; doesn&#8217;t support the new file formats and codecs,&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2013\/06\/ffmpeg-for-ogg-and-webm\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[2],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/3893"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=3893"}],"version-history":[{"count":0,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/3893\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=3893"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=3893"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=3893"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}