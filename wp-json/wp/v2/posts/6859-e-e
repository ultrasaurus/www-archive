{"id":6859,"date":"2019-10-13T08:17:17","date_gmt":"2019-10-13T15:17:17","guid":{"rendered":"https:\/\/www.ultrasaurus.com\/?p=6859"},"modified":"2019-10-13T11:03:43","modified_gmt":"2019-10-13T18:03:43","slug":"rust-whats-a-tuple-variant","status":"publish","type":"post","link":"https:\/\/www.ultrasaurus.com\/2019\/10\/rust-whats-a-tuple-variant\/","title":{"rendered":"[rust] what&#8217;s a tuple variant?"},"content":{"rendered":"<p>Learning Rust, like with any new programming language, requires learning the language of compiler error messages, which is partly about the Rust language itself and partly how Rust programmers talk about the language.  One of the first error messages that tripped me up was when I was attempting to return a <code>Result<\/code>.<\/p>\n<p>I wrote a function that had a syntax error like this one:<\/p>\n<pre><code>fn get_num() -&gt; Result&lt;i32, &amp;'static str&gt; {\n  let result = 4;\n  OK(result);\n}\n<\/code><\/pre>\n<p>Which generates this error:<\/p>\n<pre><code>   |\n11 | fn get_num() -&gt; Result&lt;i32, &amp;'static str&gt; {\n   |    -------      ^^^^^^^^^^^^^^^^^^^^^^^^^ expected enum `std::result::Result`, found ()\n   |    |\n   |    implicitly returns `()` as its body has no tail or `return` expression\n12 |   let result = 4;\n13 |   OK(result);\n   |             - help: consider removing this semicolon\n   |\n   = note: expected type `std::result::Result&lt;i32, &amp;'static str&gt;`\n              found type `()`\n<\/code><\/pre>\n<p>So, of course, I remove the semicolon, which leads to this error:<\/p>\n<pre><code>error[E0425]: cannot find function `OK` in this scope\n  --&gt; examples\/tuple.rs:13:3\n   |\n13 |   OK(result)\n   |   ^^ help: a tuple variant with a similar name exists: `Ok`\n<\/code><\/pre>\n<p>The compiler doesn&#8217;t know what I&#8217;m attempting to do, so it gives me two possibilities:<br \/>\n  1. cannot find function <code>OK<\/code><br \/>\n  2. a tuple variant with a similar name exists: <code>Ok<\/code><\/p>\n<p>When I first saw this error, I thought the second part was simply pointing out the location of the error and giving me more detail.  I spent a few hours trying to figure out where I had created a conflicting tuple variant&#8230; and what the heck was a tuple variant?  I copy\/pasted seemingly identical code and somehow the problem went away but I didn&#8217;t know what I had fixed. When I hit this error a second time, I isolated a small test case, wrote a <a href=\"https:\/\/stackoverflow.com\/questions\/55800693\/whats-a-a-tuple-variant-understanding-compiler-error-message\/55802994#55802994\">StackOverflow post<\/a> and some helpful person pointed out that <code>Ok<\/code> in Rust has a lower-case <code>k<\/code>.<\/p>\n<p>For some reason my fingers really want to type <code>OK<\/code> and my eyes really want to see that as a correct formation of the syntax, so I get this error now and then. &#8220;Hello, tuple variant my old friend!&#8221; says the voice in my head that anthropomorphizes my code. Then as my fingers automatically fix the typo and recompile, I reflect on Rust tuples and wonder about tuple variants.<\/p>\n<h2>So, what&#8217;s a tuple?<\/h2>\n<p>A tuple is a &#8220;finite heterogeneous sequence,&#8221; and one of Rust&#8217;s primitive type (see <a href=\"https:\/\/doc.rust-lang.org\/std\/primitive.tuple.html\">doc<\/a>).<\/p>\n<p>The <a href=\"https:\/\/doc.rust-lang.org\/std\/keyword.enum.html\">enum keyword<\/a> allows us to express a type which has multiple <em>variants<\/em> which from context must be <em>tuple variants<\/em>, though I was never able to find a reference to this in the docs.<\/p>\n<p><strong>Update<\/strong>:<br \/>\n&#8211; <a href=\"https:\/\/twitter.com\/ultrasaurus\/status\/1183402662340907008\">discussion on twitter<\/a><br \/>\n&#8211; bug filed with suggestions from twitter thread: https:\/\/github.com\/rust-lang\/rust\/issues\/65386<br \/>\n&#8211; there are some very awesome people developing the Rust language (and surrounding ecosystem of tools and docs)<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Learning Rust, like with any new programming language, requires learning the language of compiler error messages, which is partly about the Rust language itself and partly how Rust programmers talk about the language. One of the first error messages that tripped me up was when I was attempting to return a Result. I wrote a&hellip; <a href=\"https:\/\/www.ultrasaurus.com\/2019\/10\/rust-whats-a-tuple-variant\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":84,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[2],"tags":[],"_links":{"self":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/6859"}],"collection":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/users\/84"}],"replies":[{"embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/comments?post=6859"}],"version-history":[{"count":7,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/6859\/revisions"}],"predecessor-version":[{"id":6866,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/posts\/6859\/revisions\/6866"}],"wp:attachment":[{"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/media?parent=6859"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/categories?post=6859"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.ultrasaurus.com\/wp-json\/wp\/v2\/tags?post=6859"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}